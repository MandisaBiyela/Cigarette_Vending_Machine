<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
</head>
<body>
    <h1>Cigarette Stock Dashboard</h1>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul style="color:red;">
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <a href="/add">âž• Add Product</a> |
    <a href="/transactions">ðŸ“‹ View Transactions</a> |
    <a href="/analytics">ðŸ“Š Weekly Analytics</a>

    <table border="1" cellpadding="5" cellspacing="0">
        <tr>
            <th>Brand</th>
            <th>Price (R)</th>
            <th>Stock</th>
            <th>Actions</th>
            <th>Purchase</th>
        </tr>
        {% for product in products %}
        <tr>
            <td>{{ product[1] }}</td>
            <td>{{ product[2] }}</td>
            <td>{{ product[3] }}</td>
            <td>
                <a href="/edit/{{ product[0] }}">Edit</a> |
                <a href="/delete/{{ product[0] }}" onclick="return confirm('Are you sure you want to delete this product?');">Delete</a>
            </td>
            <td>
                <form method="POST" action="/purchase/{{ product[0] }}">
                    <input type="number" name="quantity" min="1" placeholder="Qty" required>
                    <button type="submit">Buy</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
